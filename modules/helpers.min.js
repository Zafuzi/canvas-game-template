const utils={comma:function(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},deg2xy:function(radius,angle){let x,y;return{x:radius*Math.cos(2*Math.PI*angle/360),y:radius*Math.sin(2*Math.PI*angle/360)}},formatDate:function(date){let d;return date.toISOString().slice(0,19).replace("T"," ")},getHue:function(percent,start,end){var a,b,c;return"hsl("+((end-start)*(percent/100)+start)+", 100%, 50%)"},getRandomColor:function(){return"#"+(16777216+16777215*Math.random()).toString(16).substr(1,6)},getRandomInt:function(min,max){return min=Math.ceil(min),max=Math.floor(max),Math.floor(Math.random()*(max-min))+min},hexToRgbA:function(hex){var c;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex))return 3==(c=hex.substring(1).split("")).length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),{r:(c="0x"+c.join(""))>>16&255,g:c>>8&255,b:255&c,a:1};throw new Error("Bad Hex")},makeid:function(){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text},lerp:function(value1,value2,amount){return value1+(value2-value1)*(amount=(amount=amount<0?0:amount)>1?1:amount)},trackTransforms:function(ctx){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),xform=svg.createSVGMatrix();ctx.getTransform=function(){return xform};var savedTransforms=[],save=ctx.save;ctx.save=function(){return savedTransforms.push(xform.translate(0,0)),save.call(ctx)};var restore=ctx.restore;ctx.restore=function(){return xform=savedTransforms.pop(),restore.call(ctx)};var scale=ctx.scale;ctx.scale=function(sx,sy){return xform=xform.scaleNonUniform(sx,sy),scale.call(ctx,sx,sy)};var rotate=ctx.rotate;ctx.rotate=function(radians){return xform=xform.rotate(180*radians/Math.PI),rotate.call(ctx,radians)};var translate=ctx.translate;ctx.translate=function(dx,dy){return xform=xform.translate(dx,dy),translate.call(ctx,dx,dy)};var transform=ctx.transform;ctx.transform=function(a,b,c,d,e,f){var m2=svg.createSVGMatrix();return m2.a=a,m2.b=b,m2.c=c,m2.d=d,m2.e=e,m2.f=f,xform=xform.multiply(m2),transform.call(ctx,a,b,c,d,e,f)};var setTransform=ctx.setTransform;ctx.setTransform=function(a,b,c,d,e,f){return xform.a=a,xform.b=b,xform.c=c,xform.d=d,xform.e=e,xform.f=f,setTransform.call(ctx,a,b,c,d,e,f)};var pt=svg.createSVGPoint();ctx.transformedPoint=function(x,y){return pt.x=x,pt.y=y,pt.matrixTransform(xform.inverse())}}};